<!--
  Generated template for the EmbarquePage_03Page page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>

  <ion-toolbar no-padding no-margin color="primary">
    <ion-navbar>
      <ion-title>
        GUÍAS
      </ion-title>
    </ion-navbar>
    <ion-buttons end>
      <button ion-button icon-only (click)="presentPopover($event)">
        <ion-icon name="more"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>

  <ion-grid class="bgHeader statico">
    <ion-row align-items-center>
      <ion-col col-4 col-sm>
        <div class="textHeader">N° Planificación: </div>
      </ion-col>
      <ion-col col-8 col-sm>
        <div class="valueHeader">{{ vParameter.Id_Tra }}</div>
      </ion-col>
    </ion-row>
    <ion-row align-items-center>
      <ion-col col-2 col-sm>
        <div class="textHeader">Bultos: </div>
      </ion-col>
      <ion-col col-1 col-sm>
        <div class="valueHeader">{{ totalBultos }}</div>
      </ion-col>
      <ion-col col-2 col-sm>
        <div class="textHeader">Saldo: </div>
      </ion-col>
      <ion-col col-1 col-sm>
        <div class="valueHeader">{{ totalSaldo }}</div>
      </ion-col>
      <ion-col col-3 col-sm>
        <div class="textHeader">Operado: </div>
      </ion-col>
      <ion-col col-1 col-sm>
        <div class="valueHeader">{{ totalOperado }}</div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-header>

<ion-content no-padding>
  <ion-list [virtualScroll]="listDetalle" [approxItemHeight]="'20px'">
    <ion-card *virtualItem="let obj">
      <ion-card-content no-padding (click)="goToEmbarPage04(obj)">
        <ion-grid>
          <ion-row>
            <ion-col col-1 col-sm class="label-color" [ngClass]="{ 'count-green-footer': (obj.OperacionBultos > 0 && (obj.SaldoBultos == 0)),
                           'count-yellow-footer': (obj.OperacionBultos > 0 && (obj.SaldoBultos > 0)),
                           'count-gris-footer': (obj.CantidadBultos == obj.SaldoBultos)
                         }">
            </ion-col>
            <ion-col col-10 col-sm>
              <ion-row>
                <ion-col class="emb03-card-col" col-4 col-sm>
                  <ion-label class="emb03-card-label fieldForm">Guía:</ion-label>
                </ion-col>
                <ion-col class="emb03-card-col" col-8 col-sm>
                  <ion-label class="emb03-card-label">{{ obj.NumeroFactura }}</ion-label>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-col class="emb03-card-col" col-4 col-sm>
                  <ion-label class="emb03-card-label fieldForm">Nro orden:</ion-label>
                </ion-col>
                <ion-col class="emb03-card-col">
                  <ion-label class="emb03-card-label">{{ obj.NumOrden }}</ion-label>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-col class="emb03-card-col" col-3 col-sm>
                  <ion-label class="emb03-card-label fieldForm">Bultos:</ion-label>
                </ion-col>
                <ion-col class="emb03-card-col">
                  <ion-label class="emb03-card-label">{{ obj.CantidadBultos }}</ion-label>
                </ion-col>

                <ion-col class="emb03-card-col" col-3 col-sm>
                  <ion-label class="emb03-card-label fieldForm">Saldo:</ion-label>
                </ion-col>
                <ion-col class="emb03-card-col">
                  <ion-label class="emb03-card-label">{{ obj.SaldoBultos }}</ion-label>
                </ion-col>
                <ion-col class="emb03-card-col" col-3 col-sm>
                  <ion-label class="emb03-card-label fieldForm">Operado:</ion-label>
                </ion-col>
                <ion-col class="emb03-card-col">
                  <ion-label class="emb03-card-label">{{ obj.OperacionBultos }}</ion-label>
                </ion-col>
              </ion-row>
            </ion-col>          
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>
  </ion-list>
</ion-content>

<ion-footer class="bgLightBlue">
  <ion-grid>
    <ion-row no-padding no-margin>
      <ion-col col-6 style="margin: 0px; padding: 1px">
        <ion-label no-padding no-margin class="total-footer">
          Total ítems: {{rowCount}} fila(s)
        </ion-label>
      </ion-col>
      <ion-col col-2 class="col-counts-footer">
        <ion-label no-padding no-margin class="count-gris-footer box-counter">
          {{rowCountPendiente}}
        </ion-label>
      </ion-col>
      <ion-col ccol-2 class="col-counts-footer">
        <ion-label no-padding no-margin class="count-yellow-footer box-counter">
          {{rowCountEnProceso}}
        </ion-label>
      </ion-col>
      <ion-col col-2 class="col-counts-footer">
        <ion-label no-padding no-margin class="count-green-footer box-counter">
          {{rowCountCompleto}}
        </ion-label>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-grid style="margin: 0px; padding: 0px">
    <ion-row>
      <ion-col style="margin: 0px; padding: 0px;">
        <button ion-button style=" margin: 0px; padding: 0px" (click)="cerrarEmbarque()" medium full>
          <div>
            <ion-icon name='custom-save'></ion-icon> <br>
          </div>
        </button>
      </ion-col>
      <ion-col style="margin: 0px; padding: 0px;">
        <button ion-button style=" margin: 0px; padding: 0px" (click)="goToEmbarPage05(vParameter)" medium full>
          <div>
            <ion-icon name='list-box'></ion-icon> <br>
          </div>
        </button>
      </ion-col>
      <ion-col style="margin: 0px; padding: 0px; ">
        <button ion-button style="margin: 0px; padding: 0px" (click)="verificarDespacho()" medium full>
          <div>
            <ion-icon name='checkmark-circle'></ion-icon> <br>
          </div>
        </button>
      </ion-col>
      <ion-col style="margin: 0px; padding: 0px; ">
        <button ion-button style="margin: 0px; padding: 0px" (click)="goToEmbarPage04(vParameter)" medium full>
          <div>
            <ion-icon name='archive'></ion-icon> <br>
          </div>
        </button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-footer>